\doxysection{include/threads/trimmer\+\_\+thread.h File Reference}
\hypertarget{trimmer__thread_8h}{}\label{trimmer__thread_8h}\index{include/threads/trimmer\_thread.h@{include/threads/trimmer\_thread.h}}
{\ttfamily \#include "{}../variables/structures.\+h"{}}\newline
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
DWORD \mbox{\hyperlink{trimmer__thread_8h_ade2e7ac971d24a51f6787c1561fde99b}{page\+\_\+trimmer}} (LPVOID thread\+Context)
\begin{DoxyCompactList}\small\item\em This is the function that deals with unmapping pages. It will pop a page off the active list and add it to the modified list. It will batch unmap if the consecutive pages are in the same page table entry region. \end{DoxyCompactList}\item 
\mbox{\hyperlink{structpfn}{pfn}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{trimmer__thread_8h_a11880728b8d9ad4f839b15939c2fc2d1}{get\+Active\+Page}} (\mbox{\hyperlink{structures_8h_a0d2bf865b114b5aa46dd6f5558f60df4}{PTHREAD\+\_\+\+INFO}} thread\+Info)
\begin{DoxyCompactList}\small\item\em This functions pops a page off the active list and returns it unlocked. \end{DoxyCompactList}\item 
BOOL \mbox{\hyperlink{trimmer__thread_8h_a13dcdf0321f41ee6605a3ba9578fecd0}{is\+Next\+Page\+In\+Same\+Region}} (\mbox{\hyperlink{struct_p_t_e___r_e_g_i_o_n}{PTE\+\_\+\+REGION}} \texorpdfstring{$\ast$}{*}next\+Region, \mbox{\hyperlink{structures_8h_a0d2bf865b114b5aa46dd6f5558f60df4}{PTHREAD\+\_\+\+INFO}} info)
\begin{DoxyCompactList}\small\item\em This function peeks into the head of the active list and sees if the next page is in the same pte region. \end{DoxyCompactList}\item 
VOID \mbox{\hyperlink{trimmer__thread_8h_aefb918ee98100baec9ed6e9bf1b8e58b}{unmap\+Batch}} (PULONG64 virtual\+Addresses, ULONG64 batch\+Size)
\begin{DoxyCompactList}\small\item\em Simple wrapper for a Map\+User\+Physical\+Pages\+Scatter call. \end{DoxyCompactList}\item 
VOID \mbox{\hyperlink{trimmer__thread_8h_a8624239b4805f261525d6d33ff65b091}{add\+Batch\+To\+Modified\+List}} (\mbox{\hyperlink{structpfn}{pfn}} \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}pages, ULONG64 batch\+Size, \mbox{\hyperlink{structures_8h_a0d2bf865b114b5aa46dd6f5558f60df4}{PTHREAD\+\_\+\+INFO}} info)
\begin{DoxyCompactList}\small\item\em This function adds a batch of pages to the modified list. \end{DoxyCompactList}\end{DoxyCompactItemize}


\label{doc-func-members}
\Hypertarget{trimmer__thread_8h_doc-func-members}
\doxysubsection{Function Documentation}
\Hypertarget{trimmer__thread_8h_a8624239b4805f261525d6d33ff65b091}\index{trimmer\_thread.h@{trimmer\_thread.h}!addBatchToModifiedList@{addBatchToModifiedList}}
\index{addBatchToModifiedList@{addBatchToModifiedList}!trimmer\_thread.h@{trimmer\_thread.h}}
\doxysubsubsection{\texorpdfstring{addBatchToModifiedList()}{addBatchToModifiedList()}}
{\footnotesize\ttfamily \label{trimmer__thread_8h_a8624239b4805f261525d6d33ff65b091} 
VOID add\+Batch\+To\+Modified\+List (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structpfn}{pfn}} \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}}]{pages}{, }\item[{ULONG64}]{batch\+Size}{, }\item[{\mbox{\hyperlink{structures_8h_a0d2bf865b114b5aa46dd6f5558f60df4}{PTHREAD\+\_\+\+INFO}}}]{thread\+Context}{}\end{DoxyParamCaption})}



This function adds a batch of pages to the modified list. 


\begin{DoxyParams}{Parameters}
{\em pages} & An array of pointers to pages. \\
\hline
{\em batch\+Size} & The size of the array. \\
\hline
{\em thread\+Context} & The thread info of the caller \\
\hline
\end{DoxyParams}
\Hypertarget{trimmer__thread_8h_a11880728b8d9ad4f839b15939c2fc2d1}\index{trimmer\_thread.h@{trimmer\_thread.h}!getActivePage@{getActivePage}}
\index{getActivePage@{getActivePage}!trimmer\_thread.h@{trimmer\_thread.h}}
\doxysubsubsection{\texorpdfstring{getActivePage()}{getActivePage()}}
{\footnotesize\ttfamily \label{trimmer__thread_8h_a11880728b8d9ad4f839b15939c2fc2d1} 
\mbox{\hyperlink{structpfn}{pfn}} \texorpdfstring{$\ast$}{*} get\+Active\+Page (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structures_8h_a0d2bf865b114b5aa46dd6f5558f60df4}{PTHREAD\+\_\+\+INFO}}}]{thread\+Context}{}\end{DoxyParamCaption})}



This functions pops a page off the active list and returns it unlocked. 


\begin{DoxyParams}{Parameters}
{\em thread\+Context} & The thread info of the caller. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Returns an active page. If the list is empty, it returns null. 
\end{DoxyReturn}
\Hypertarget{trimmer__thread_8h_a13dcdf0321f41ee6605a3ba9578fecd0}\index{trimmer\_thread.h@{trimmer\_thread.h}!isNextPageInSameRegion@{isNextPageInSameRegion}}
\index{isNextPageInSameRegion@{isNextPageInSameRegion}!trimmer\_thread.h@{trimmer\_thread.h}}
\doxysubsubsection{\texorpdfstring{isNextPageInSameRegion()}{isNextPageInSameRegion()}}
{\footnotesize\ttfamily \label{trimmer__thread_8h_a13dcdf0321f41ee6605a3ba9578fecd0} 
BOOL is\+Next\+Page\+In\+Same\+Region (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_p_t_e___r_e_g_i_o_n}{PTE\+\_\+\+REGION}} \texorpdfstring{$\ast$}{*}}]{region}{, }\item[{\mbox{\hyperlink{structures_8h_a0d2bf865b114b5aa46dd6f5558f60df4}{PTHREAD\+\_\+\+INFO}}}]{info}{}\end{DoxyParamCaption})}



This function peeks into the head of the active list and sees if the next page is in the same pte region. 


\begin{DoxyParams}{Parameters}
{\em region} & The page table region struct of the batch that is currently being trimmed. \\
\hline
{\em info} & The info of the caller. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Returns true if the next page\textquotesingle{}s corresponding page table entry is in the region passed in. 
\end{DoxyReturn}
\Hypertarget{trimmer__thread_8h_ade2e7ac971d24a51f6787c1561fde99b}\index{trimmer\_thread.h@{trimmer\_thread.h}!page\_trimmer@{page\_trimmer}}
\index{page\_trimmer@{page\_trimmer}!trimmer\_thread.h@{trimmer\_thread.h}}
\doxysubsubsection{\texorpdfstring{page\_trimmer()}{page\_trimmer()}}
{\footnotesize\ttfamily \label{trimmer__thread_8h_ade2e7ac971d24a51f6787c1561fde99b} 
DWORD page\+\_\+trimmer (\begin{DoxyParamCaption}\item[{LPVOID}]{info}{}\end{DoxyParamCaption})}



This is the function that deals with unmapping pages. It will pop a page off the active list and add it to the modified list. It will batch unmap if the consecutive pages are in the same page table entry region. 


\begin{DoxyParams}{Parameters}
{\em info} & A pointer to a thread info struct. Passed in during the function Create\+Thread \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em 0} & If the program succeeds \\
\hline
\end{DoxyRetVals}
\Hypertarget{trimmer__thread_8h_aefb918ee98100baec9ed6e9bf1b8e58b}\index{trimmer\_thread.h@{trimmer\_thread.h}!unmapBatch@{unmapBatch}}
\index{unmapBatch@{unmapBatch}!trimmer\_thread.h@{trimmer\_thread.h}}
\doxysubsubsection{\texorpdfstring{unmapBatch()}{unmapBatch()}}
{\footnotesize\ttfamily \label{trimmer__thread_8h_aefb918ee98100baec9ed6e9bf1b8e58b} 
VOID unmap\+Batch (\begin{DoxyParamCaption}\item[{PULONG64}]{virtual\+Addresses}{, }\item[{ULONG64}]{batch\+Size}{}\end{DoxyParamCaption})}



Simple wrapper for a Map\+User\+Physical\+Pages\+Scatter call. 


\begin{DoxyParams}{Parameters}
{\em virtual\+Addresses} & An array of virtual addresses to unmap. \\
\hline
{\em batch\+Size} & The size of the array. \\
\hline
\end{DoxyParams}
